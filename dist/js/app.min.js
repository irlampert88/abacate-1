var app=angular.module("app",["ngRoute","ngSanitize","ngCookies","ngLocale"]),configs={urlApi:"https://jsonplaceholder.typicode.com/"},rotas={home:"/home",login:"/login",solicitacao:"/solicitacao"};app.config(function($routeProvider,$locationProvider){$locationProvider.html5Mode(!0),$routeProvider.when(rotas.home,{templateUrl:"views/home.html"}).when(rotas.login,{templateUrl:"views/login.html"}).when(rotas.solicitacao,{templateUrl:"views/solicitacao.html"}).otherwise({redirectTo:"/home"})}),app.controller("mainController",function($scope,$location,$http,$cookies){$scope.exibirCarregando=!0,$scope.requisicoesPendentes=0,$scope.sessao={id:0,nome:null,auth:null,logado:!1},$scope.$on("$routeChangeStart",function(){$scope.exibirCarregando=!0,$scope.sessao.logado||"/login"!==$location.path()&&"/solicitacao"!==$location.path()&&$location.path(rotas.login)}),$scope.$on("$routeChangeSuccess",function(){$scope.exibirCarregando=!1}),$scope.api=function(url,metodo,dados,retorno,sucesso,erro,callback,parametros){var config={url:configs.urlApi+url,method:metodo,headers:{"Content-Type":"application/json",Autorization:"Basic "+$scope.sessao.auth}};$scope.requisicoesPendentes++,$http(config).then(function(result){$scope.requisicoesPendentes--,retorno[sucesso]=result.data,void 0!==callback&&callback(parametros)},function(error){$scope.requisicoesPendentes--,retorno[erro]=error.status+" "+error.statusText})},$scope.logout=function(){$scope.sessao={id:0,nome:null,auth:null,logado:!1},$cookies.remove("sessao"),$location.path(rotas.login)}}),app.controller("genericController",function($scope,$location){$scope.hoje=new Date,$scope.efetuarLogin=function(){$scope.sessao.logado=!0,$location.path(rotas.home)}});